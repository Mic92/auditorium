<% if @courses_by_faculty.count > 0 %>

  <% @courses_by_faculty.each do |faculty, courses| %>

    <h2><%= "My Courses in #{faculty}" %></h2>

    <% cols = 3 ; cols = 12/cols ; i = 0 %>

    <div class="row-fluid" id="grid" >
      <% courses.each do |course| %>
        <div class="span<%=cols%>" id="well-<%= course.id %>" style="padding:0;margin-bottom:20px;">
          <div class="well-small"> 

            <div class="subtle pull-right">
              <%= link_to "#{course_path(course)}/unfollow", :class => "icon-remove remove-cross btn btn-mini btn-link", 'data-id' => "#{course.id}", 'data-name' => "#{course.name}"  do %>
              <% end %>
            </div>

            <h3 style="min-height:50px;"> <%= link_to course.name, course %><br/> </h3>


            <% if course.infos.count > 0  %>
              <dl>
                <dt class="info-title">
                <a href="#" class="info" data-id="<%= course.id%>" data-type="info">
                  <i class="chevron icon-chevron-right"></i>
                  <span class="pull-right"><%= pluralize(course.infos.count, 'info') %></span>
                </a>
                </dt>

                <dd class="info-details" id="info-details-<%= course.id%>">
                <% if course.infos.count > 0 %>
                  <ul class="unstyled">
                    <% course.infos.first(4).each do |info| %>

                      <li>
                      <span class="hidden-phone-tight post-date pull-right"> <%= "#{distance_of_time_in_words(Time.now, info.created_at)}" %> </span>
                      <strong> <%= link_to "#{info.subject}", info %> </strong> <br/>
                      </li>

                    <% end %>
                    <% if course.infos.count > 4 %>
                      <li><%= link_to 'more Â»', course %></li>
                    <% end %>
                  </ul>	
                <% else %>
                  <%= link_to "No infos ask yet. Be the first.", course %>
                <% end %>
                </dd> </dl>
              <% end %>


              <dl>
                <dt class="question-title"> 
                <a href="#" class="question" data-id="<%= course.id%>" data-type="question">
                  <i class="chevron icon-chevron-right"></i>
                  <span class="dont-pull-right"><%= pluralize(course.questions.count, 'question') %></span>
                </a>
                </dt>

                <dd class="question-details" id="question-details-<%= course.id%>">
                <% if course.questions.count > 0 %>
                  <ul class="unstyled">
                    <% course.questions.first(4).each do |question| %>

                      <li>

                      <strong>
                        <% if question.answered? %>
                          <span class="icon-check answered"></span>
                        <% else%>
                          <span class="icon-check-empty"></span>
                        <% end %>
                        <%= link_to "#{shorten question.subject, 26}", question %>
                      </strong>
                      <br/>
                      <span class="subtle">
                        <em> <%= question.author %> </em> |
                        <em> <%= pluralize question.answers.count, 'answer' %> </em> |
                        <em> <%= "#{distance_of_time_in_words(Time.now, question.created_at)}" %> ago </em>
                      </span>

                      </li>

                    <% end %>
                    <% if course.questions.count > 4 %>
                      <li><%= link_to 'more Â»', course %></li>
                    <% end %>
                  </ul>	
                <% else %>
                  <%= link_to "No questions ask yet. Be the first.", course %>
                <% end %>
                </dd> </dl>


              <div class="subtle pull-right" style="text-align:right;">
                <%= course.participants.count %>/ <%= pluralize(course.followers.count, 'active member') %>
              </div>
              </div>

            </div>
            <% i=i+1 %>
            <% if i % (12/cols) == 0 %>
            </div>

            <div class="row-fluid" >
            <% end %>

          <% end %>
        </div>

      <% end %>

      <%= paginate @courses %>

    <% else %>

      <h2>Courses</h2>

      <div class="alert alert-info">Seems that no courses are currently in the database. <% if user_signed_in? %><%= link_to 'Create a course.', new_course_path %><% end %></div>

    <% end %>
