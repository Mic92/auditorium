<div class="center span8">
  <h2>Search</h2>

  <%= form_tag '/search', :method => 'get', :id => 'search_form', :remote => false do %>
    <%= text_field_tag :query, params[:query], :placeholder => 'Search', :class => 'search-query span8', :id => 'searchbar' %>
  <% end %>

  <h2>Search results</h2>

  <% if params[:query].nil? %>
    <div class="alert alert-info">Type in your search query...</div>
  <% elsif @results[:posts].empty? and @results[:lectures].empty? and @results[:courses].empty? %>
    <div class="alert alert-info">No results found!</div>
  <% else %>

    <% if @results[:lectures].count > 0 %>
      <h3><%= pluralize(@results[:lectures].count, 'Lectures') %></h3>
      <table class="table">
        <% @results[:lectures].each do |lecture| %>
        <tr><td><%= link_to lecture.name, lecture %></td></tr>
        <% end %>
      </table>
    <% end %>
    
    <% if @results[:courses].count > 0 %>
      <h3><%= pluralize(@results[:courses].count, 'Course') %></h3>
      <table class="table">
        <% @results[:courses].each do |course| %>
        <tr><td><%= link_to course.name, course %></td></tr>
        <% end %>
      </table>
    <% end %>
    
    <% if @results[:posts].count > 0 %>
      <h3><%= pluralize(@results[:posts].count, 'Post') %></h3>
      <table class="table">
        <% @results[:posts].each do |post| %>
        <tr><td><%= link_to post.subject, post %></td></tr>
        <% end %>
      </table>
    <% end %>

  <% end %>
  </div>